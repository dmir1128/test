{"site":{"title":"","description":null,"enableMobile":true,"websiteUrl":null,"faviconPath":null,"thumbnailSocialPath":null,"descriptionSocial":null,"titleSocial":null,"lang":"","width":1200,"headUser":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, shrink-to-fit=0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">\r\n  <title>360-image-viewer</title>\r\n  <link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro\" rel=\"stylesheet\">\r\n  <style>\r\n  body {\r\n    margin: 0;\r\n    font-family: 'Source Sans Pro', Helvetica, sans-serif;\r\n    overflow: hidden;\r\n  }\r\n  * {\r\n    -webkit-touch-callout:none;\r\n    -webkit-text-size-adjust:none;\r\n    -webkit-tap-highlight-color:rgba(0,0,0,0);\r\n    -webkit-user-select:none;\r\n  }\r\n  .info {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    margin: 20px;\r\n    pointer-events: none;\r\n  }\r\n  .hr {\r\n    width: 20px;\r\n    height: 1px;\r\n    margin: 0;\r\n    padding: 0;\r\n    margin-bottom: 10px;\r\n    display: block;\r\n    background: white;\r\n    vertical-align: middle;\r\n  }\r\n  p {\r\n    display: block;\r\n    margin: 0;\r\n    padding: 0;\r\n    vertical-align: middle;\r\n    color: white;\r\n    font-size: 10px;\r\n  }\r\n  canvas, .grab {\r\n    cursor: -webkit-grab;\r\n    cursor: -moz-grab;\r\n  }\r\n  canvas:active, .grabbing {\r\n    cursor: -webkit-grabbing;\r\n    cursor: -moz-grabbing; \r\n  }\r\n  #drop-region {\r\n    position: absolute;\r\n    top: 5px;\r\n    left: 5px;\r\n    width: calc(100% - 10px);\r\n    height: calc(100% - 10px);\r\n    pointer-events: none;\r\n    border: 2px dashed white;\r\n    box-sizing: border-box;\r\n    border-radius: 10px;\r\n    padding: 10px;\r\n    mix-blend-mode: overlay;\r\n    box-shadow: 0px 0px 20px 10px rgba(0, 0, 0, 0.5);\r\n  }\r\n  </style>\r\n</head>\r\n<body>\r\n  <canvas id=\"canvas\"></canvas>\r\n  <div class=\"info\">\r\n    <div class=\"hr\"></div>\r\n    <p>Drop an equirectangular JPG or PNG here to view it in 360ยบ</p>\r\n  </div>\r\n  <div id=\"drop-region\" style=\"display: none;\"></div>\r\n  <script src=\"bundle.js\"></script>\r\n</body>\r\n</html>","headStyle":"","headScript":"const create360Viewer = require('../');\r\nconst getMaxTextureSize = require('./getMaxTextureSize');\r\nconst dragDrop = require('drag-drop');\r\n\r\nconst dropRegion = document.querySelector('#drop-region');\r\n\r\n// Get a canvas of some sort, e.g. fullscreen or embedded in a site\r\nconst canvas = createCanvas({\r\n  canvas: document.querySelector('#canvas'),\r\n  // without this, the canvas defaults to full-screen\r\n  // viewport: [ 20, 20, 500, 256 ]\r\n});\r\n\r\n// Get the max image size possible\r\nconst imageUrl = getImageURL();\r\n\r\n// whether to always rotate the view\r\nconst autoSpin = false;\r\n\r\n// Load your image\r\nconst image = new Image();\r\nimage.src = imageUrl;\r\nimage.onload = () => {\r\n  // Setup the 360 viewer\r\n  const viewer = create360Viewer({\r\n    image: image,\r\n    canvas: canvas\r\n  });\r\n\r\n  setupDragDrop(canvas, viewer);\r\n\r\n  // Start canvas render loop\r\n  viewer.start();\r\n\r\n  viewer.on('tick', (dt) => {\r\n    if (autoSpin && !viewer.controls.dragging) {\r\n      viewer.controls.theta -= dt * 0.00005;\r\n    }\r\n  });\r\n};\r\n\r\n// Utility to create a device pixel scaled canvas\r\nfunction createCanvas (opt = {}) {\r\n  // default to full screen (no width/height specified)\r\n  const viewport = opt.viewport || [ 0, 0 ];\r\n\r\n  const canvas = opt.canvas || document.createElement('canvas');\r\n  canvas.style.position = 'absolute';\r\n  canvas.style.top = `${viewport[0]}px`;\r\n  canvas.style.left = `${viewport[1]}px`;\r\n\r\n  // Resize the canvas with the proper device pixel ratio\r\n  const resizeCanvas = () => {\r\n    // default to fullscreen if viewport width/height is unspecified\r\n    const width = typeof viewport[2] === 'number' ? viewport[2] : window.innerWidth;\r\n    const height = typeof viewport[3] === 'number' ? viewport[3] : window.innerHeight;\r\n    const dpr = window.devicePixelRatio;\r\n    canvas.width = width * dpr;\r\n    canvas.height = height * dpr;\r\n    canvas.style.width = `${width}px`;\r\n    canvas.style.height = `${height}px`;\r\n  };\r\n\r\n  // Ensure the grab cursor appears even when the mouse is outside the window\r\n  const setupGrabCursor = () => {\r\n    canvas.addEventListener('mousedown', () => {\r\n      document.documentElement.classList.remove('grabbing');\r\n      document.documentElement.classList.add('grabbing');\r\n    });\r\n    window.addEventListener('mouseup', () => {\r\n      document.documentElement.classList.remove('grabbing');\r\n    });\r\n  };\r\n\r\n  window.addEventListener('resize', resizeCanvas);\r\n  resizeCanvas();\r\n  setupGrabCursor();\r\n  return canvas;\r\n}\r\n\r\nfunction getImageURL () {\r\n  // Choose a large texture size based on our GPU\r\n  const maxTextureSize = getMaxTextureSize();\r\n  let imageUrl = 'pano_2048.jpg';\r\n  if (maxTextureSize >= 7000) imageUrl = 'pano_7000.jpg';\r\n  else if (maxTextureSize >= 4096) imageUrl = 'pano_4096.jpg';\r\n  return imageUrl;\r\n}\r\n\r\nfunction setupDragDrop (canvas, viewer) {\r\n  dragDrop(canvas, {\r\n    onDragEnter: () => {\r\n      dropRegion.style.display = '';\r\n    },\r\n    onDragLeave: () => {\r\n      dropRegion.style.display = 'none';\r\n    },\r\n    onDrop: (files) => {\r\n      var img = new Image();\r\n      img.onload = () => {\r\n        viewer.texture(img);\r\n      };\r\n      img.onerror = () => {\r\n        alert('Could not load image!');\r\n      };\r\n      img.crossOrigin = 'Anonymous';\r\n      img.src = URL.createObjectURL(files[0]);\r\n    }\r\n  });\r\n}","hostingProvider":"unifile","twitterSocial":null,"dataSources":{},"fonts":[{"family":"'Roboto', sans-serif","href":"https://fonts.googleapis.com/css?family=Roboto"}],"styles":{"all-style":{"className":"all-style","templateName":"text","displayName":"All style","styles":{"desktop":{"normal":{"className":"all-style","pseudoClass":"normal","All":{"font-family":"'Roboto', sans-serif"}}}}}},"isTemplate":false,"file":{"name":"editable.html","folder":"test/main","path":"test/main/editable.html","service":"github","url":"https://editor.silex.me/ce/github/get/test/main/editable.html","absPath":"/ce/github/get/test/main/editable.html"},"prodotypeDependencies":{},"data":{}},"pages":[{"id":"page-page-1","displayName":"Page 1","link":{"linkType":"LinkTypePage","href":"#!page-page-1"},"canDelete":true,"canProperties":true,"canMove":true,"canRename":true,"opened":false}],"elements":[{"id":"body-initial","pageNames":[],"classList":[],"type":"container-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1478366444112-1","silex-id-1474394621033-3","silex-id-1478366450713-3"],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"rgba(255,255,255,1)","position":"static"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"BODY"},{"id":"silex-id-1478366444112-1","pageNames":["page-page-1"],"classList":[],"type":"section-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1478366444112-0"],"link":null,"enableEdit":false,"enableDrag":true,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","position":"static","margin-top":"-1px"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"SECTION"},{"id":"silex-id-1478366444112-0","pageNames":[],"classList":["website-width"],"type":"container-element","isSectionContent":true,"title":"","alt":null,"children":[],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"rgba(0,0,0,1)","height":"100px","position":"relative","margin-left":"auto","margin-right":"auto"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"DIV"},{"id":"silex-id-1474394621033-3","pageNames":["page-page-1"],"classList":[],"type":"section-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1474394621032-2"],"link":null,"enableEdit":false,"enableDrag":true,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"position":"static","margin-top":"-1px"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"SECTION"},{"id":"silex-id-1474394621032-2","pageNames":[],"classList":["website-width"],"type":"container-element","isSectionContent":true,"title":"","alt":null,"children":[],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"rgba(0,0,0,1)","height":"600px","position":"relative","margin-left":"auto","margin-right":"auto"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"DIV"},{"id":"silex-id-1478366450713-3","pageNames":["page-page-1"],"classList":[],"type":"section-element","isSectionContent":false,"title":"","alt":null,"children":["silex-id-1478366450713-2"],"link":null,"enableEdit":false,"enableDrag":true,"enableDrop":true,"enableResize":{"top":false,"bottom":false,"left":false,"right":false},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"transparent","position":"static","margin-top":"-1px"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"SECTION"},{"id":"silex-id-1478366450713-2","pageNames":[],"classList":["website-width"],"type":"container-element","isSectionContent":true,"title":"","alt":null,"children":["silex-id-1442914737143-3"],"link":null,"enableEdit":false,"enableDrag":false,"enableDrop":true,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"background-color":"rgba(0,0,0,1)","height":"100px","position":"relative","margin-left":"auto","margin-right":"auto"},"mobile":{}},"data":{"component":null},"innerHtml":"","tagName":"DIV"},{"id":"silex-id-1442914737143-3","pageNames":[],"classList":[],"type":"text-element","isSectionContent":false,"title":"","alt":null,"children":[],"link":null,"enableEdit":true,"enableDrag":true,"enableDrop":false,"enableResize":{"top":true,"bottom":true,"left":true,"right":true},"selected":false,"useMinHeight":true,"visibility":{"desktop":true,"mobile":true},"style":{"desktop":{"width":"241px","top":"26px","left":"494px","height":"51px","position":"absolute"},"mobile":{}},"data":{"component":null},"innerHtml":"<p>Powered by <a href=\"https://www.silex.me/\" target=\"_blank\" title=\"Silex website builder,  free and open source\" linktype=\"LinkTypeExternal\">Silex website builder</a></p>","tagName":"DIV"}]}